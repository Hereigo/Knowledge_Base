<!doctype html>
<html>

<head>
    <title>Directive Demo</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.js"></script>
    <style>
        [ng-bind] {
            font-weight: bold;
        }
    </style>
</head>

<body class="jumbotron container" ng-app="myApp">
    <h3>List of Sale Items.</h3>

    <div ng-controller="AppController as ctrl">

        <div NG-REPEAT="item in ctrl.items">
            <!-- processed by Directive 'itemWidget' -->
            <item-widget ITEM="item" PROMO="Christmas-Sale" ON-SELECT="ctrl.onItemSelect(selectedItem)"></item-widget>
        </div>

    </div>

    <script type="text/javascript">
        angular.module('myApp', [])
            .controller('AppController', [function () {
                var self = this;
                self.items = [
                    { name: 'Computer', price: 500, condition: 'New', brand: 'Lenovo', published: '01/11/2015' },
                    { name: 'Phone', price: 200, condition: 'New', brand: 'Samsung', published: '02/11/2015' },
                    { name: 'Dishwasher', price: 250, condition: 'Second-Hand', brand: 'WhirlPool', published: '01/12/2015' },
                ];
                self.onItemSelect = function (name) {
                    console.log('Congrats! You have just bought a', name);
                };
            }])
            .directive('itemWidget', [function () {
                return {
                    restrict: 'E',
                    scope: {
                        item: '=',
                        promo: '@',
                        pickMe: '&onSelect'
                    },
                    templateUrl: 'saleItemWidget.html',
                    link: function (scope, element, attrs) {
                        element.on('click', function (event) {
                            element.html('Thanks for buying this item.');
                            element.css({ color: 'green' });
                        });
                    }
                }
            }]);
    </script>
</body>

</html>